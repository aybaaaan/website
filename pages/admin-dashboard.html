<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="../css/AdminPage.css" />
    <link rel="stylesheet" href="../responsive/AdminResponsive.css" />
  </head>

  <body>
    <!-- Top bar -->
    <header>
      <div class="header-left">
        <div id="hamburger" class="hamburger">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <div class="logo">Mediterranean In Velvet | Admin</div>
      </div>

      <div class="header-actions">
        <a href="#" id="btn-logout">LOG OUT</a>
      </div>
    </header>

    <div class="container">
      <!-- Sidebar -->
      <aside>
        <h3>Dashboard</h3>

        <a href="../pages/admin-dashboard.html"
          ><button>Data Analytics</button></a
        >
        <a href="admin-orders.html" class="sidebar-link orders-link">
          <span class="sidebar-text">Orders</span>
          <span id="ordersBadge" class="orders-badge hidden">0</span>
        </a>

        <a href="../pages/admin-manage-content.html"
          ><button>Manage Contents</button></a
        >
        <a href="../pages/admin-manage-announcements.html"
          ><button>Manage Announcements</button></a
        >
        <a href="../pages/admin-feedback.html"><button>Feedback</button></a>
        <a href="../pages/admin-orders-history.html"
          ><button>Archived Orders</button></a
        >
      </aside>

      <!-- Main content -->
      <main>
        <h4 class="title-tag">User Analytics</h4>
        <!-- User Analytics -->
        <section id="user-analytics" class="user-section">
          <div class="user-card">
            <div class="user-chart">
              <!-- Login Analytics -->
              <div class="login-result-container">
                <div class="loginResult" id="loginResult"></div>
              </div>

              <!-- Orders Analytics -->
              <div class="orders-container">
                <div class="orderResult" id="orderResult"></div>
              </div>
            </div>
          </div>
        </section>

        <div class="title-tag">
          Sales Report
          <button class="exportBtn" id="exportExcelBtn">Export to Excel</button>
        </div>

        <!-- Sales Report -->
        <div id="salesReportContainer" class="sales-report">
          <div class="card">
            <div class="table-filters">
              <label>
                From:
                <input type="date" id="dateFrom" />
              </label>

              <label>
                To:
                <input type="date" id="dateTo" />
              </label>

              <button id="resetDateFilter">Reset</button>
            </div>

            <table id="salesReportTable">
              <thead>
                <tr>
                  <th>Order ID</th>
                  <th>Customer</th>
                  <th>Food Items/Subtotal</th>
                  <th>Qty</th>
                  <th>Amount (₱)</th>
                  <th>Total Amount (₱)</th>
                  <th>Payment Method</th>
                  <th>Order Date</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="8">Loading...</td>
                </tr>
              </tbody>
            </table>
            <div class="pagination-controls">
              <button id="prevPageTable">Prev</button>
              <span id="pageInfo">Page 1</span>
              <button id="nextPageTable">Next</button>
            </div>
          </div>
        </div>
        <!-- Order Details Modal -->
        <div id="orderModal" class="modal">
          <div class="modal-content" style="max-width: 800px">
            <h3>Order Details</h3>
            <p><strong>Order ID:</strong> <span id="modalOrderID"></span></p>

            <table class="modal-table">
              <thead>
                <tr>
                  <th>Food(s)</th>
                  <th>Qty</th>
                  <th>Subtotal (₱)</th>
                </tr>
              </thead>

              <tbody id="orderModalBody"></tbody>
            </table>
            <div class="order-summary">
              <p>
                <strong>Payment Method:</strong> <span id="modalPayment"></span>
              </p>
              <p><strong>Order Date:</strong> <span id="modalDate"></span></p>
              <p><strong>Total:</strong> <span id="modalTotal"></span></p>
            </div>
            <div class="modal-footer">
              <button id="closeOrderModal">Close</button>
            </div>
          </div>
        </div>

        <!-- Data Analytics -->
        <h4 class="title-tag">Data Analytics</h4>
        <section class="data-section" id="section-analytics">
          <div class="card">
            <div class="chart">
              <h2>Data Overview</h2>

              <div style="margin-bottom: 10px">
                <label class="data-label" for="data-type"
                  >Select Data Type:</label
                >
                <select class="data-type-option" id="data-type">
                  <option value="sales">Sales</option>
                  <option value="orders">Orders</option>
                  <option value="revenue">Revenue</option>
                </select>
              </div>

              <div class="chart-controls">
                <button id="btn-today">Today</button>
                <button id="btn-week">This Week</button>
                <button id="btn-month">This Month</button>
              </div>

              <canvas id="dataChart" height="300"></canvas>
            </div>
          </div>
        </section>
      </main>
    </div>

    <div id="logoutModal" class="modal">
      <div class="modal-content">
        <p>Are you sure you want to log out?</p>
        <div class="modal-actions">
          <button id="cancel-logout">Cancel</button>
          <button id="confirm-logout">Confirm</button>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <!-- Excel export library -->
    <script type="module" src="../script/admin-dashboard.js"></script>
    <script type="module" src="../script/admin-common.js"></script>
  </body>
</html>
