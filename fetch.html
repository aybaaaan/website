<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>View Contact Messages</title>
  </head>
  <body>
    <h2>Orders from Firebase</h2>
    <table border="1">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Message</th>
        </tr>
      </thead>
      <tbody id="ordersTable"></tbody>
    </table>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
      import {
        getDatabase,
        ref,
        onValue,
      } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-database.js";

      const firebaseConfig = {
        apiKey: "AIzaSyAvQnRa_q4JlxVgcifjFtKM4i2ckHTJInc",
        authDomain: "webusiteu.firebaseapp.com",
        databaseURL:
          "https://webusiteu-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "webusiteu",
        storageBucket: "webusiteu.firebasestorage.app",
        messagingSenderId: "974146331400",
        appId: "1:974146331400:web:a0590d7dc71dd3c00f02bd",
      };

      const app = initializeApp(firebaseConfig);
      const db = getDatabase(app);

      const ordersRef = ref(db, "Order");
      const ordersTable = document.getElementById("ordersTable");

      onValue(ordersRef, (snapshot) => {
        ordersTable.innerHTML = "";
        snapshot.forEach((child) => {
          const data = child.val();
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${data.name}</td>
            <td>${data.emailid}</td>
            <td>${data.msgContent}</td>
          `;
          ordersTable.appendChild(row);
        });
      });
    </script>
  </body>
</html>
